[build]
target = "xtensa-esp8266-none-elf"

[target.xtensa-esp8266-none-elf]
rustflags = [
  "-C", "target-cpu=esp8266",
  "-C", "save-temps",
  "-C", "link-arg=-nostdlib",

  "-C", "link-arg=-ucall_user_start_cpu0",

  "-C", "link-arg=-Wl,--gc-sections",
  "-C", "link-arg=-Wl,-static",
  "-C", "link-arg=-Wl,--start-group",

  "-C", "link-arg=-L/home/idf-project/build/app_update", "-C", "link-arg=-lapp_update",
  "-C", "link-arg=-L/home/idf-project/build/bootloader_support", "-C", "link-arg=-lbootloader_support",
  "-C", "link-arg=-L/home/idf-project/build/coap", "-C", "link-arg=-lcoap",
  "-C", "link-arg=-L/home/idf-project/build/console", "-C", "link-arg=-lconsole",
  "-C", "link-arg=-L/home/idf-project/build/esp-tls",  "-C", "link-arg=-lesp-tls",
  "-C", "link-arg=-L/home/idf-project/build/esp-wolfssl", "-C", "link-arg=-lesp-wolfssl",
  "-C", "link-arg=-L/home/idf-project/build/esp8266",  "-C", "link-arg=-lesp8266",
  "-C", "link-arg=-Lesp-idf/components/esp8266/lib",
  "-C", "link-arg=-lgcc",
  "-C", "link-arg=-lhal",
  "-C", "link-arg=-lcore",
  "-C", "link-arg=-lnet80211",
  "-C", "link-arg=-lphy",
  "-C", "link-arg=-lrtc",
  "-C", "link-arg=-lclk",
  "-C", "link-arg=-lpp",
  "-C", "link-arg=-lsmartconfig",
  "-C", "link-arg=-lssc",
  "-C", "link-arg=-lwpa",
  "-C", "link-arg=-lwpa2",

  "-C", "link-arg=-Lesp-idf/components/esp8266/ld",
  "-C", "link-arg=-Tesp8266_out.ld",
  "-C", "link-arg=-T/home/idf-project/build/esp8266/esp8266.project.ld",

  "-C", "link-arg=-Wl,--no-check-sections",
  "-C", "link-arg=-ucall_user_start",
  "-C", "link-arg=-ug_esp_sys_info",
  "-C", "link-arg=-Tesp8266.rom.ld",
  "-C", "link-arg=-Tesp8266.peripherals.ld",
  "-C", "link-arg=-L/home/idf-project/build/esp_common", "-C", "link-arg=-lesp_common",
  "-C", "link-arg=-L/home/idf-project/build/esp_gdbstub", "-C", "link-arg=-lesp_gdbstub",
  "-C", "link-arg=-L/home/idf-project/build/esp_http_client", "-C", "link-arg=-lesp_http_client",
  "-C", "link-arg=-L/home/idf-project/build/esp_http_server", "-C", "link-arg=-lesp_http_server",
  "-C", "link-arg=-L/home/idf-project/build/esp_https_ota", "-C", "link-arg=-lesp_https_ota",
  "-C", "link-arg=-L/home/idf-project/build/esp_ringbuf", "-C", "link-arg=-lesp_ringbuf",
  "-C", "link-arg=-L/home/idf-project/build/freertos", "-C", "link-arg=-lfreertos",
  "-C", "link-arg=-L/home/idf-project/build/heap", "-C", "link-arg=-lheap",
  "-C", "link-arg=-L/home/idf-project/build/http_parser", "-C", "link-arg=-lhttp_parser",
  "-C", "link-arg=-L/home/idf-project/build/jsmn", "-C", "link-arg=-ljsmn",
  "-C", "link-arg=-L/home/idf-project/build/json", "-C", "link-arg=-ljson",
  "-C", "link-arg=-L/home/idf-project/build/libsodium", "-C", "link-arg=-llibsodium",
  "-C", "link-arg=-L/home/idf-project/build/log", "-C", "link-arg=-llog",
  "-C", "link-arg=-L/home/idf-project/build/lwip", "-C", "link-arg=-llwip",

  # Supporting C code, freertos shim, etc.
  "-C", "link-arg=-L/home/idf-project/build/main", "-C", "link-arg=-lmain",

  "-C", "link-arg=-L/home/idf-project/build/mbedtls", "-C", "link-arg=-lmbedtls",
  "-C", "link-arg=-L/home/idf-project/build/mdns", "-C", "link-arg=-lmdns",
  "-C", "link-arg=-L/home/idf-project/build/mqtt", "-C", "link-arg=-lmqtt",
  "-C", "link-arg=-L/home/idf-project/build/newlib",
  "-C", "link-arg=/home/esp32-toolchain/esp/esp-idf/components/newlib/newlib/lib/libc_fnano.a",
  "-C", "link-arg=/home/esp32-toolchain/esp/esp-idf/components/newlib/newlib/lib/libm.a",
  "-C", "link-arg=-lnewlib",

  "-C", "link-arg=-u_printf_float",
  "-C", "link-arg=-u_scanf_float",
  "-C", "link-arg=-L/home/idf-project/build/nvs_flash", "-C", "link-arg=-lnvs_flash",
  "-C", "link-arg=-L/home/idf-project/build/openssl", "-C", "link-arg=-lopenssl",
  "-C", "link-arg=-L/home/idf-project/build/protobuf-c", "-C", "link-arg=-lprotobuf-c",
  "-C", "link-arg=-L/home/idf-project/build/protocomm", "-C", "link-arg=-lprotocomm",
  "-C", "link-arg=-L/home/idf-project/build/pthread", "-C", "link-arg=-lpthread",
  "-C", "link-arg=-L/home/idf-project/build/smartconfig_ack", "-C", "link-arg=-lsmartconfig_ack",
  "-C", "link-arg=-L/home/idf-project/build/spi_flash", "-C", "link-arg=-lspi_flash",
  "-C", "link-arg=-L/home/idf-project/build/spi_ram", "-C", "link-arg=-lspi_ram",
  "-C", "link-arg=-L/home/idf-project/build/spiffs", "-C", "link-arg=-lspiffs",
  "-C", "link-arg=-L/home/idf-project/build/tcp_transport", "-C", "link-arg=-ltcp_transport",
  "-C", "link-arg=-L/home/idf-project/build/tcpip_adapter", "-C", "link-arg=-ltcpip_adapter",
  "-C", "link-arg=-L/home/idf-project/build/util", "-C", "link-arg=-lutil",
  "-C", "link-arg=-L/home/idf-project/build/vfs", "-C", "link-arg=-lvfs",
  "-C", "link-arg=-L/home/idf-project/build/wifi_provisioning", "-C", "link-arg=-lwifi_provisioning",
  "-C", "link-arg=-L/home/idf-project/build/wpa_supplicant", "-C", "link-arg=-lwpa_supplicant",
  "-C", "link-arg=-lgcc",
  "-C", "link-arg=-lstdc++",
  "-C", "link-arg=-lgcov",
  "-C", "link-arg=-Wl,--end-group",
  "-C", "link-arg=-Wl,-EL",
]
